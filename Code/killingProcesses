#!/bin/bash

#This script kills the processes executed by "Initialize"
#First it gets the process ID of each thread of interest and then it kills it. This should be called after executing Ctr+Z in the terminal of the Initialize script.



reason=$1


#Getting the PID and killing every process

#reInitialize=$(ps | grep reInitialize)
#reInitialize=$(echo "$reInitialize" | awk -F"?" '{print $2}')


#Initialize=$(ps -A | grep Initialize)
#Initialize=$(echo "$Initialize" | awk -F"?" '{print $2}')

#bitrateread=$(ps -A | grep bitrateread)
#bitrateread=$(echo "$bitrateread" | awk -F" ?" '{print $2}')

#main=$(ps -A | grep main)
#main=$(echo "$main" | awk -F" ?" '{print $2}')

#loopGPS=$(ps -A | grep loopGPS)
#loopGPS=$(echo "$loopGPS" | awk -F" ?" '{print $2}')

#loopStatistics=$(ps -A | grep loopStatistics)
#loopStatistics=$(echo "$loopStatistics" | awk -F" ?" '{print $2}')

#loopPCI=$(ps -A | grep loopPCI)
#loopPCI=$(echo "$loopPCI" | awk -F" ?" '{print $2}')

#loopSNR=$(ps -A | grep loopSNR)
#loopSNR=$(echo "$loopSNR" | awk -F" ?" '{print $2}')

#ifstat=$(ps -A | grep ifstat)
#ifstat=$(echo "$ifstat" | awk -F" ?" '{print $2}')


#gdrivelinux=$(ps -A | grep gdrive-linux)
#gdrivelinux=$(echo "$gdrivelinux" | awk -F" ?" '{print $2}')


#Uploading=$(ps -A | grep Uploading)
#Uploading=$(echo "$Uploading" | awk -F" ?" '{print $2}')








#sudo kill -9 $reInitialize
#sudo kill -9 $Initialize
#sudo kill -9 $bitrateread
#sudo kill -9 $main
#sudo kill -9 $loopGPS
#sudo kill -9 $loopStatistics
#sudo kill -9 $loopPCI
#sudo kill -9 $loopSNR
#sudo kill -9 $ifstat
#sudo kill -9 $gdrivelinux
#sudo kill -9 $Uploading

sudo echo "0" > /sys/class/gpio/gpio26/value #RED LED OFF

 sudo kill -9 $(ps -ef | grep python | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep loopGPS | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep main | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep bitrateread | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep loopStatistics | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep loopPCI | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep loopSNR | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep ifstat | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep Uploading | grep -v grep | awk '{print $2}') 
 sudo kill -9 $(ps -ef | grep gdrive-linux | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep autoStart | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep qmicli | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep rebootInitialize | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep reInitialize | grep -v grep | awk '{print $2}')
 sudo kill -9 $(ps -ef | grep Initialize | grep -v grep | awk '{print $2}')

#if [ "$reason" != "main" ]; then

#sudo kill -9 $(ps -ef | grep Initialize | grep -v grep | awk '{print $2}')
#sudo kill -9 $(ps -ef | grep main | grep -v grep | awk '{print $2}')

#fi


