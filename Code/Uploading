#!/bin/bash

#we get the name of the folder to save the files

folder=$1

#filename1=logs_upload

#log purposes
#date --iso-8601=ns >> /home/upboard/Desktop/"$folder"/"$filename1"
#echo -e "The uploading of the file has started\n" >> /home/upboard/Desktop/"$folder"/"$filename1"

#Script that uploads a file of interest and then saves its ID in a file to be deleted


#The file where the logs will be saved

x=$(date)
filename=logs_upload #_$x




while true; do

#log purposes
date --iso-8601=ns >> /home/upboard/Desktop/"$folder"/"$filename"
echo -e "Uploading again (or at the start) \n" >> /home/upboard/Desktop/"$folder"/"$filename"

#log terminal purposes
date --iso-8601=ns >> /home/upboard/Desktop/"$folder"/"$filename"
echo -e "Uploading now" >> /home/upboard/Desktop/"$folder"/"$filename"

#We execute the upload and safe the output in the variable
IDstatement=$(sudo /home/upboard/Desktop/gdrive-linux-x64 --config /home/upboard/Desktop/gdrive-linux-64 upload /home/upboard/Desktop/r2_l_TDC1.mat)

#log terminal purposes
date --iso-8601=ns >> /home/upboard/Desktop/"$folder"/"$filename"
echo -e "Finish Uploading. The IDStatement is " $IDstatement ".\n" >> /home/upboard/Desktop/"$folder"/"$filename"


echo "$IDstatement" > /home/upboard/Desktop/IDGoogleDrive
sudo chmod 777 /home/upboard/Desktop/IDGoogleDrive

#log purposes
date --iso-8601=ns >> /home/upboard/Desktop/"$folder"/"$filename"
echo "Successfully uploaded file with ID $IDstatement" >> /home/upboard/Desktop/"$folder"/"$filename"


#log purposes in terminal
sudo /home/upboard/Desktop/gdrive-linux-x64 --config /home/upboard/Desktop/gdrive-linux-64 list #to show on the list that is has been Uploaded 

#log purposes
date --iso-8601=ns >> /home/upboard/Desktop/"$folder"/"$filename"
echo "The list of files in drive after uploading is" >> /home/upboard/Desktop/"$folder"/"$filename"
#log purposes
date --iso-8601=ns >> /home/upboard/Desktop/"$folder"/"$filename"
sudo /home/upboard/Desktop/gdrive-linux-x64 --config /home/upboard/Desktop/gdrive-linux-64 list  >> /home/upboard/Desktop/"$folder"/"$filename"





done

