#!/bin/bash

autostart=OFF


#THIS FILE WAS DONE FOR THE AUTOSTART USING UPDATES AND CONFIGURATION FROM GOOGLE DRIVE. ANYWAY IT WAS NOT FINISHED SO CHECK IN CASE WANTS TO BE USED


if [ "$autostart" == "ON" ];then


	sleep 10

	# We first enable the switch and omni antenna to get coverage neutrally


	sudo /home/upboard/Desktop/UpBoard-Code-and-Results/Code/setUpGPIOs

	sudo echo "1" > /sys/class/gpio/gpio27/value 	#Enable the switch input from the main switch J3 RF1
	sudo /home/upboard/Desktop/UpBoard-Code-and-Results/Code/switch 6 #To the second switch (omni antenna)

	sleep 20
	
	name=$(date --iso-8601=seconds)


#### We wait for internet connection and then we download the flag from google drive ####

# The flag will be in the drive of michelmassanetginar@gmail.com, that is, the Code gdrive






	ID=1h91XNgvSErNtugjSKKaauI7dbInqtAcQ



	sudo /home/upboard/Desktop/UpBoard-Code-and-Results/Code/gdrive-master/gdrive-master --config /home/upboard/Desktop/UpBoard-Code-and-Results/Code/gdrive-master download $ID --path /home/upboard/Desktop/UpBoard-Code-and-Results/ --force

	configuration=$(sudo cat /home/upboard/Desktop/UpBoard-Code-and-Results/configuration.txt)


	if [ "$configuration" == "0" ];then

		sudo /home/upboard/Desktop/UpBoard-Code-and-Results/Code/Initialize "$name"_direc
	else

		sudo /home/upboard/Desktop/UpBoard-Code-and-Results/CodeOmni/Initialize "$name"_omni		

	fi

fi
